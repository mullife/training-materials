\subchapter{Develop your application in the Poky SDK}{Generate and use
the Poky SDK}

During this lab, you will:
\begin{itemize}
  \item Build the Poky SDK
  \item Install the SDK
  \item Compile an application for the BeagleBone in the SDK
    environment
\end{itemize}

\section{Build the SDK}

Two SDKs are available, one only embedding a toolchain and the
other one allowing for application development. We will use the latter one
here.

First, build an SDK for the \code{felabs-image-minimal} image, with
the \code{populate_sdk} task.

Once the SDK is generated, a script will be available at
\code{tmp/deploy/sdk}.

\section{Install the SDK}

Open a new console to be sure that no extra environment variable is set.
We mean to show you how the SDK sets up a fully working environment.

Install the SDK in \code{$HOME/yocto-labs/sdk} by executing the script
generated at the previous step.

{\footnotesize
\begin{verbatim}
$BUILDDIR/tmp/deploy/sdk/poky-glibc-x86_64-felabs-image-minimal-cortexa8hf-neon-toolchain-2.1.sh
\end{verbatim}
}

\section{Set up the environment}

Go into the directory where you installed the SDK
(\code{$HOME/yocto-labs/sdk}). Source the environment script:
\begin{verbatim}
source environment-setup-cortexa8hf-vfp-neon-poky-linux-gnueabi
\end{verbatim}

Have a look on the exported environment variables:
\begin{verbatim}
env
\end{verbatim}

\section{Compile an application in the SDK}

Download the essential \code{Ctris} sources at
\url{http://www.hackl.dhs.org/data/download/download.php?file=ctris-0.42.tar.bz2}

Extract the source in the SDK:
\begin{verbatim}
tar xf ctris-0.42.tar.bz2
cd ctris-0.42
\end{verbatim}

Then modify the Makefile, to make sure that the environment variables exported
by the SDK script are not overridden.

Compile the application. You can check the application was
successfully compiled for the right target by using the file command.
The \code{ctris} binary should be an ELF 32-bit LSB executable
compiled for ARM.

Finally, you can copy the binary to the board, by using the \code{scp}
command. Then run it and play a bit to ensure it is working fine!
